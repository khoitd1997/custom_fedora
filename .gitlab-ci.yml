image: "khoitd1997/docker-hatter:latest"

stages:
  - build
  - test
  - deploy

build_hatter:
  stage: build
  script:
    - sh src/cli/build.sh
  artifacts:
    paths:
      - src/cli/build/bin/tomlparser

deploy_hatter:
  stage: deploy
  dependencies:
    - build_hatter
  before_script:
    - npm install @semantic-release/github @semantic-release/commit-analyzer @semantic-release/release-notes-generator -D
  script:
    - npx semantic-release